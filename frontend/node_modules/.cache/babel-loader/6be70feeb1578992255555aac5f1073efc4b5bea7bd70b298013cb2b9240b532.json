{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport api from '../../services/api';\n\n// Async thunks\nexport const login = createAsyncThunk('auth/login', async ({\n  email,\n  password\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await api.post('/api/auth/login', {\n      email,\n      password\n    });\n    const {\n      token,\n      user\n    } = response.data;\n    localStorage.setItem('token', token);\n    return {\n      token,\n      user\n    };\n  } catch (error) {\n    var _error$response;\n    return rejectWithValue(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || 'Login failed');\n  }\n});\nexport const register = createAsyncThunk('auth/register', async (userData, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await api.post('/api/auth/register', userData);\n    return response.data;\n  } catch (error) {\n    var _error$response2;\n    return rejectWithValue(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || 'Registration failed');\n  }\n});\nexport const validateToken = createAsyncThunk('auth/validateToken', async (token, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await api.post('/api/auth/validate', {}, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return {\n      token,\n      user: response.data\n    };\n  } catch (error) {\n    localStorage.removeItem('token');\n    return rejectWithValue('Token validation failed');\n  }\n});\nexport const updateProfile = createAsyncThunk('auth/updateProfile', async (profileData, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await api.put('/api/users/profile', profileData);\n    return response.data;\n  } catch (error) {\n    var _error$response3;\n    return rejectWithValue(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || 'Profile update failed');\n  }\n});\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState: {\n    user: null,\n    token: localStorage.getItem('token'),\n    isLoading: false,\n    error: null\n  },\n  reducers: {\n    logout: state => {\n      state.user = null;\n      state.token = null;\n      state.error = null;\n      localStorage.removeItem('token');\n    },\n    clearError: state => {\n      state.error = null;\n    }\n  },\n  extraReducers: builder => {\n    builder\n    // Login\n    .addCase(login.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(login.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n      state.error = null;\n    }).addCase(login.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    })\n    // Register\n    .addCase(register.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(register.fulfilled, state => {\n      state.isLoading = false;\n      state.error = null;\n    }).addCase(register.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    })\n    // Validate Token\n    .addCase(validateToken.pending, state => {\n      state.isLoading = true;\n    }).addCase(validateToken.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n      state.error = null;\n    }).addCase(validateToken.rejected, state => {\n      state.isLoading = false;\n      state.user = null;\n      state.token = null;\n    })\n    // Update Profile\n    .addCase(updateProfile.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(updateProfile.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.user = action.payload;\n      state.error = null;\n    }).addCase(updateProfile.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  logout,\n  clearError\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","api","login","email","password","rejectWithValue","response","post","token","user","data","localStorage","setItem","error","_error$response","register","userData","_error$response2","validateToken","headers","Authorization","removeItem","updateProfile","profileData","put","_error$response3","authSlice","name","initialState","getItem","isLoading","reducers","logout","state","clearError","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","actions","reducer"],"sources":["C:/Users/shaik/CascadeProjects/food-delivery-platform/frontend/src/store/slices/authSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport api from '../../services/api';\n\n// Async thunks\nexport const login = createAsyncThunk(\n  'auth/login',\n  async ({ email, password }, { rejectWithValue }) => {\n    try {\n      const response = await api.post('/api/auth/login', { email, password });\n      const { token, user } = response.data;\n      localStorage.setItem('token', token);\n      return { token, user };\n    } catch (error) {\n      return rejectWithValue(error.response?.data || 'Login failed');\n    }\n  }\n);\n\nexport const register = createAsyncThunk(\n  'auth/register',\n  async (userData, { rejectWithValue }) => {\n    try {\n      const response = await api.post('/api/auth/register', userData);\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.response?.data || 'Registration failed');\n    }\n  }\n);\n\nexport const validateToken = createAsyncThunk(\n  'auth/validateToken',\n  async (token, { rejectWithValue }) => {\n    try {\n      const response = await api.post('/api/auth/validate', {}, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      return { token, user: response.data };\n    } catch (error) {\n      localStorage.removeItem('token');\n      return rejectWithValue('Token validation failed');\n    }\n  }\n);\n\nexport const updateProfile = createAsyncThunk(\n  'auth/updateProfile',\n  async (profileData, { rejectWithValue }) => {\n    try {\n      const response = await api.put('/api/users/profile', profileData);\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.response?.data || 'Profile update failed');\n    }\n  }\n);\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState: {\n    user: null,\n    token: localStorage.getItem('token'),\n    isLoading: false,\n    error: null,\n  },\n  reducers: {\n    logout: (state) => {\n      state.user = null;\n      state.token = null;\n      state.error = null;\n      localStorage.removeItem('token');\n    },\n    clearError: (state) => {\n      state.error = null;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      // Login\n      .addCase(login.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(login.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.user = action.payload.user;\n        state.token = action.payload.token;\n        state.error = null;\n      })\n      .addCase(login.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload;\n      })\n      // Register\n      .addCase(register.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(register.fulfilled, (state) => {\n        state.isLoading = false;\n        state.error = null;\n      })\n      .addCase(register.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload;\n      })\n      // Validate Token\n      .addCase(validateToken.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(validateToken.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.user = action.payload.user;\n        state.token = action.payload.token;\n        state.error = null;\n      })\n      .addCase(validateToken.rejected, (state) => {\n        state.isLoading = false;\n        state.user = null;\n        state.token = null;\n      })\n      // Update Profile\n      .addCase(updateProfile.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(updateProfile.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.user = action.payload;\n        state.error = null;\n      })\n      .addCase(updateProfile.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload;\n      });\n  },\n});\n\nexport const { logout, clearError } = authSlice.actions;\nexport default authSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}